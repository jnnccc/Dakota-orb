<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Teuchos - Trilinos Tools Package: ArrayRCP_test.cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Teuchos - Trilinos Tools Package
   &#160;<span id="projectnumber">Version of the Day</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">ArrayRCP_test.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><span class="comment">// @HEADER</span></div><div class="line"><span class="comment">// ***********************************************************************</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//                    Teuchos: Common Tools Package</span></div><div class="line"><span class="comment">//                 Copyright (2004) Sandia Corporation</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// Under terms of Contract DE-AC04-94AL85000, there is a non-exclusive</span></div><div class="line"><span class="comment">// license for use of this work by or on behalf of the U.S. Government.</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// Redistribution and use in source and binary forms, with or without</span></div><div class="line"><span class="comment">// modification, are permitted provided that the following conditions are</span></div><div class="line"><span class="comment">// met:</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// 1. Redistributions of source code must retain the above copyright</span></div><div class="line"><span class="comment">// notice, this list of conditions and the following disclaimer.</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// 2. Redistributions in binary form must reproduce the above copyright</span></div><div class="line"><span class="comment">// notice, this list of conditions and the following disclaimer in the</span></div><div class="line"><span class="comment">// documentation and/or other materials provided with the distribution.</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// 3. Neither the name of the Corporation nor the names of the</span></div><div class="line"><span class="comment">// contributors may be used to endorse or promote products derived from</span></div><div class="line"><span class="comment">// this software without specific prior written permission.</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// THIS SOFTWARE IS PROVIDED BY SANDIA CORPORATION &quot;AS IS&quot; AND ANY</span></div><div class="line"><span class="comment">// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE</span></div><div class="line"><span class="comment">// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR</span></div><div class="line"><span class="comment">// PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL SANDIA CORPORATION OR THE</span></div><div class="line"><span class="comment">// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,</span></div><div class="line"><span class="comment">// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,</span></div><div class="line"><span class="comment">// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR</span></div><div class="line"><span class="comment">// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF</span></div><div class="line"><span class="comment">// LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING</span></div><div class="line"><span class="comment">// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS</span></div><div class="line"><span class="comment">// SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// Questions? Contact Michael A. Heroux (maherou@sandia.gov)</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// ***********************************************************************</span></div><div class="line"><span class="comment">// @HEADER</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &quot;Teuchos_ArrayRCP.hpp&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="Teuchos__Array_8hpp.html">Teuchos_Array.hpp</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="Teuchos__CommandLineProcessor_8hpp.html">Teuchos_CommandLineProcessor.hpp</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="Teuchos__GlobalMPISession_8hpp.html">Teuchos_GlobalMPISession.hpp</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;Teuchos_VerboseObject.hpp&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;Teuchos_StandardCatchMacros.hpp&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;Teuchos_Version.hpp&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;Teuchos_Assert.hpp&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="Teuchos__LocalTestingHelpers_8hpp.html">Teuchos_LocalTestingHelpers.hpp</a>&quot;</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// Temporarily uncomment any or all of these macros to see compilation</span></div><div class="line"><span class="comment">// failures for code that is rightfully not supposed to compile (which is a</span></div><div class="line"><span class="comment">// wonderful thing)! The fact that this code does not compile show that the</span></div><div class="line"><span class="comment">// design of the Teuchos::ArrayRCP class supports full support of</span></div><div class="line"><span class="comment">// const projection in all of its forms when dealing with arrays of objects.</span></div><div class="line"><span class="comment">//#define SHOW_COMPILE_FAILURE_1</span></div><div class="line"><span class="comment">//#define SHOW_COMPILE_FAILURE_2</span></div><div class="line"><span class="comment">//#define SHOW_COMPILE_FAILURE_3</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// Iterator testing function</span></div><div class="line"><span class="comment">//</span></div><div class="line"></div><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</div><div class="line"><span class="keywordtype">bool</span> test_ArrayRCP_iterators(</div><div class="line">  <span class="keyword">const</span> <a name="_a0"></a><a class="code" href="classTeuchos_1_1ArrayRCP.html">Teuchos::ArrayRCP&lt;T&gt;</a> &amp;<a name="a1"></a><a class="code" href="classTeuchos_1_1Ptr.html#af7234a3ac243772a707da53d011276fb">ptr</a>,</div><div class="line">  <a name="_a2"></a><a class="code" href="classTeuchos_1_1basic__FancyOStream.html">Teuchos::FancyOStream</a> &amp;out</div><div class="line">  )</div><div class="line">{</div><div class="line"></div><div class="line">  <span class="keyword">using</span> <a class="code" href="classTeuchos_1_1ArrayRCP.html">Teuchos::ArrayRCP</a>;</div><div class="line">  <span class="keyword">using</span> Teuchos::null;</div><div class="line">  <span class="keyword">using</span> Teuchos::arcp;</div><div class="line"></div><div class="line">  <span class="keywordtype">bool</span> success = <span class="keyword">true</span>;</div><div class="line"></div><div class="line">  out</div><div class="line">    &lt;&lt; <span class="stringliteral">&quot;\n***&quot;</span></div><div class="line">    &lt;&lt; <span class="stringliteral">&quot;\n*** Testing iterators and accessors for ptr = &quot;</span> &lt;&lt; ptr</div><div class="line">    &lt;&lt; <span class="stringliteral">&quot;\n***\n&quot;</span>;</div><div class="line"></div><div class="line">  <a name="_a3"></a><a class="code" href="classTeuchos_1_1basic__OSTab.html">Teuchos::OSTab</a> <a name="a4"></a><a class="code" href="classTeuchos_1_1basic__FancyOStream.html#a3f28173f7e236ee16e3d84368f54d185">tab</a>(out);</div><div class="line"></div><div class="line">  <span class="keyword">const</span> <span class="keywordtype">int</span> <a name="a5"></a><a class="code" href="classTeuchos_1_1Comm.html#a346c8703a1ee3cb18cf3c812678cb01c">size</a> = ptr.size();</div><div class="line"></div><div class="line">  <span class="comment">// Pointer ++</span></div><div class="line"> </div><div class="line">  {</div><div class="line">    out &lt;&lt; <span class="stringliteral">&quot;\nChecking ++itr and &lt; ...\n&quot;</span>;</div><div class="line">    ArrayRCP&lt;T&gt; itr = <a class="code" href="classTeuchos_1_1Ptr.html#af7234a3ac243772a707da53d011276fb">ptr</a>;</div><div class="line">    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; itr &lt; ptr+<a class="code" href="classTeuchos_1_1Comm.html#a346c8703a1ee3cb18cf3c812678cb01c">size</a>; ++i, ++itr )</div><div class="line">      <a name="a6"></a><a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(*itr == ptr[i]) );</div><div class="line">  }</div><div class="line"> </div><div class="line">  {</div><div class="line">    out &lt;&lt; <span class="stringliteral">&quot;\nChecking itr++ and &lt;= ...\n&quot;</span>;</div><div class="line">    ArrayRCP&lt;T&gt; itr = <a class="code" href="classTeuchos_1_1Ptr.html#af7234a3ac243772a707da53d011276fb">ptr</a>;</div><div class="line">    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; itr &lt;= ptr+size-1; ++i, itr++ )</div><div class="line">      <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(*itr == ptr[i]) );</div><div class="line">  }</div><div class="line"> </div><div class="line">  {</div><div class="line">    out &lt;&lt; <span class="stringliteral">&quot;\nChecking itr+=1 and != ...\n&quot;</span>;</div><div class="line">    ArrayRCP&lt;T&gt; itr = <a class="code" href="classTeuchos_1_1Ptr.html#af7234a3ac243772a707da53d011276fb">ptr</a>;</div><div class="line">    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; itr != ptr+<a class="code" href="classTeuchos_1_1Comm.html#a346c8703a1ee3cb18cf3c812678cb01c">size</a>; ++i, itr+=1 )</div><div class="line">      <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(*itr == ptr[i]) );</div><div class="line">  }</div><div class="line"> </div><div class="line">  {</div><div class="line">    out &lt;&lt; <span class="stringliteral">&quot;\nChecking itr=itr+1 and == ...\n&quot;</span>;</div><div class="line">    ArrayRCP&lt;T&gt; itr = <a class="code" href="classTeuchos_1_1Ptr.html#af7234a3ac243772a707da53d011276fb">ptr</a>;</div><div class="line">    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; !( itr == ptr+<a class="code" href="classTeuchos_1_1Comm.html#a346c8703a1ee3cb18cf3c812678cb01c">size</a> ); ++i, itr=itr+1 )</div><div class="line">      <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(*itr == ptr[i]) );</div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="comment">// Pointer --</span></div><div class="line"> </div><div class="line">  {</div><div class="line">    out &lt;&lt; <span class="stringliteral">&quot;\nChecking --itr and &gt;= ...\n&quot;</span>;</div><div class="line">    ArrayRCP&lt;T&gt; itr = ptr+size-1;</div><div class="line">    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = size-1; itr &gt;= <a class="code" href="classTeuchos_1_1Ptr.html#af7234a3ac243772a707da53d011276fb">ptr</a>; --i, --itr )</div><div class="line">      <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(*itr == ptr[i]) );</div><div class="line">  }</div><div class="line"> </div><div class="line">  {</div><div class="line">    out &lt;&lt; <span class="stringliteral">&quot;\nChecking itr-- and &gt; ...\n&quot;</span>;</div><div class="line">    ArrayRCP&lt;T&gt; itr = ptr+size-1;</div><div class="line">    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = size-1; itr+1 &gt; <a class="code" href="classTeuchos_1_1Ptr.html#af7234a3ac243772a707da53d011276fb">ptr</a>; i--, itr-- )</div><div class="line">      <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(*itr == ptr[i]) );</div><div class="line">  }</div><div class="line"> </div><div class="line">  {</div><div class="line">    out &lt;&lt; <span class="stringliteral">&quot;\nChecking itr-=1 and != ...\n&quot;</span>;</div><div class="line">    ArrayRCP&lt;T&gt; itr = ptr+size-1;</div><div class="line">    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = size-1; itr+1 != <a class="code" href="classTeuchos_1_1Ptr.html#af7234a3ac243772a707da53d011276fb">ptr</a>; i--, itr-=1 )</div><div class="line">      <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(*itr == ptr[i]) );</div><div class="line">  }</div><div class="line"> </div><div class="line">  {</div><div class="line">    out &lt;&lt; <span class="stringliteral">&quot;\nChecking itr=itr-1 and == ...\n&quot;</span>;</div><div class="line">    ArrayRCP&lt;T&gt; itr = ptr+size-1;</div><div class="line">    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = size-1; !( itr+1 == <a class="code" href="classTeuchos_1_1Ptr.html#af7234a3ac243772a707da53d011276fb">ptr</a> ); i--, itr=itr-1 )</div><div class="line">      <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(*itr == ptr[i]) );</div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="comment">// Iterator - Iterator</span></div><div class="line"> </div><div class="line">  {</div><div class="line">    out &lt;&lt; <span class="stringliteral">&quot;\nChecking ptr.end() - ptr.begin() == ptr.size() ...\n&quot;</span>;</div><div class="line">    <a name="a7"></a><a class="code" href="group__TestForException__grp.html#gae4bd9380ee7849faf0e0ecc7a611019c">TEUCHOS_ASSERT_EQUALITY</a>( ptr.end() - ptr.begin(), ptr.size() );</div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="comment">// Iterator ++</span></div><div class="line"> </div><div class="line">  {</div><div class="line">    out &lt;&lt; <span class="stringliteral">&quot;\nChecking iterator ++itr and &lt; ...\n&quot;</span>;</div><div class="line">    <span class="keyword">typename</span> ArrayRCP&lt;T&gt;::const_iterator itr = ptr.begin();</div><div class="line">    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; itr &lt; ptr.end(); ++i, ++itr )</div><div class="line">      <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(*itr == ptr[i]) );</div><div class="line">  }</div><div class="line"> </div><div class="line">  {</div><div class="line">    out &lt;&lt; <span class="stringliteral">&quot;\nChecking iterator itr++ and &lt;= ...\n&quot;</span>;</div><div class="line">    <span class="keyword">typename</span> ArrayRCP&lt;T&gt;::const_iterator itr = ptr.begin();</div><div class="line">    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; itr &lt;= ptr.end()-1; ++i, itr++ )</div><div class="line">      <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(*itr == ptr[i]) );</div><div class="line">  }</div><div class="line"> </div><div class="line">  {</div><div class="line">    out &lt;&lt; <span class="stringliteral">&quot;\nChecking iterator itr+=1 and != ...\n&quot;</span>;</div><div class="line">    <span class="keyword">typename</span> ArrayRCP&lt;T&gt;::const_iterator itr = ptr.begin();</div><div class="line">    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; itr != ptr.end(); ++i, itr+=1 )</div><div class="line">      <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(*itr == ptr[i]) );</div><div class="line">  }</div><div class="line"> </div><div class="line">  {</div><div class="line">    out &lt;&lt; <span class="stringliteral">&quot;\nChecking iterator itr=itr+1 and == ...\n&quot;</span>;</div><div class="line">    <span class="keyword">typename</span> ArrayRCP&lt;T&gt;::const_iterator itr = ptr.begin();</div><div class="line">    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; !( itr == ptr.end() ); ++i, itr=itr+1 )</div><div class="line">      <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(*itr == ptr[i]) );</div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="comment">// Iterator --</span></div><div class="line"> </div><div class="line">  {</div><div class="line">    out &lt;&lt; <span class="stringliteral">&quot;\nChecking iterator --itr and &gt;= ...\n&quot;</span>;</div><div class="line">    <span class="keyword">typename</span> ArrayRCP&lt;T&gt;::const_iterator itr = ptr.begin()+size-1;</div><div class="line">    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = size-1; itr &gt;= ptr.begin(); --i, --itr )</div><div class="line">      <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(*itr == ptr[i]) );</div><div class="line">  }</div><div class="line"> </div><div class="line">  {</div><div class="line">    out &lt;&lt; <span class="stringliteral">&quot;\nChecking iterator itr-- and &gt; ...\n&quot;</span>;</div><div class="line">    <span class="keyword">typename</span> ArrayRCP&lt;T&gt;::const_iterator itr = ptr.begin()+size-1;</div><div class="line">    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = size-1; itr+1 &gt; ptr.begin(); i--, itr-- )</div><div class="line">      <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(*itr == ptr[i]) );</div><div class="line">  }</div><div class="line"> </div><div class="line">  {</div><div class="line">    out &lt;&lt; <span class="stringliteral">&quot;\nChecking iterator itr-=1 and != ...\n&quot;</span>;</div><div class="line">    <span class="keyword">typename</span> ArrayRCP&lt;T&gt;::const_iterator itr = ptr.begin()+size-1;</div><div class="line">    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = size-1; itr+1 != ptr.begin(); i--, itr-=1 )</div><div class="line">      <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(*itr == ptr[i]) );</div><div class="line">  }</div><div class="line"> </div><div class="line">  {</div><div class="line">    out &lt;&lt; <span class="stringliteral">&quot;\nChecking iterator itr=itr-1 and == ...\n&quot;</span>;</div><div class="line">    <span class="keyword">typename</span> ArrayRCP&lt;T&gt;::const_iterator itr = ptr.begin()+size-1;</div><div class="line">    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = size-1; !( itr+1 == ptr.begin() ); i--, itr=itr-1 )</div><div class="line">      <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(*itr == ptr[i]) );</div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="keywordflow">return</span> success;</div><div class="line"></div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// Main testing function for a specific ArrayRCP</span></div><div class="line"><span class="comment">//</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</div><div class="line"><span class="keywordtype">bool</span> test_ArrayRCP(</div><div class="line">  <span class="keyword">const</span> <a class="code" href="classTeuchos_1_1ArrayRCP.html">Teuchos::ArrayRCP&lt;T&gt;</a> &amp;<a class="code" href="classTeuchos_1_1Ptr.html#af7234a3ac243772a707da53d011276fb">ptr</a>,</div><div class="line">  <a class="code" href="classTeuchos_1_1basic__FancyOStream.html">Teuchos::FancyOStream</a> &amp;out</div><div class="line">  )</div><div class="line">{</div><div class="line"></div><div class="line">  <span class="keyword">using</span> <a name="_a8"></a><a class="code" href="classTeuchos_1_1ArrayView.html">Teuchos::ArrayView</a>;</div><div class="line">  <span class="keyword">using</span> <a class="code" href="classTeuchos_1_1ArrayRCP.html">Teuchos::ArrayRCP</a>;</div><div class="line">  <span class="keyword">using</span> Teuchos::arcp;</div><div class="line">  <span class="keyword">using</span> Teuchos::arcp_const_cast;</div><div class="line">  <span class="keyword">using</span> Teuchos::as;</div><div class="line"></div><div class="line">  <span class="keywordtype">bool</span> success = <span class="keyword">true</span>, result;</div><div class="line"> </div><div class="line">  out</div><div class="line">    &lt;&lt; <span class="stringliteral">&quot;\n***&quot;</span></div><div class="line">    &lt;&lt; <span class="stringliteral">&quot;\n*** Testing ptr = &quot;</span> &lt;&lt; ptr</div><div class="line">    &lt;&lt; <span class="stringliteral">&quot;\n***\n&quot;</span>;</div><div class="line"></div><div class="line">  <a class="code" href="classTeuchos_1_1basic__OSTab.html">Teuchos::OSTab</a> <a class="code" href="classTeuchos_1_1basic__FancyOStream.html#a3f28173f7e236ee16e3d84368f54d185">tab</a>(out);</div><div class="line"></div><div class="line">  <span class="keyword">const</span> <span class="keywordtype">int</span> n = ptr.size();</div><div class="line"> </div><div class="line">  {</div><div class="line">    out &lt;&lt; <span class="stringliteral">&quot;\nInitializing data ...\n&quot;</span>;</div><div class="line">    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; n; ++i )</div><div class="line">      ptr[i] = i;</div><div class="line">  }</div><div class="line"></div><div class="line">  <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(&amp;*ptr == ptr.get()) );</div><div class="line">  <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(&amp;*ptr == ptr.getRawPtr()) );</div><div class="line"></div><div class="line">  result = test_ArrayRCP_iterators(ptr,out);</div><div class="line">  <span class="keywordflow">if</span> (!result) success = <span class="keyword">false</span>;</div><div class="line"></div><div class="line">  <span class="comment">//</span></div><div class="line">  out &lt;&lt; <span class="stringliteral">&quot;\nTest const casting ...\n&quot;</span>;</div><div class="line">  <span class="comment">//</span></div><div class="line"></div><div class="line">  {</div><div class="line">    <span class="keyword">const</span> ArrayRCP&lt;const T&gt; cptr2 = <a class="code" href="classTeuchos_1_1Ptr.html#af7234a3ac243772a707da53d011276fb">ptr</a>;</div><div class="line">    <span class="keyword">const</span> ArrayRCP&lt;T&gt; ptr3 = <a name="a9"></a><a class="code" href="classTeuchos_1_1ArrayRCP.html#a54c155ae30f1340547740d0ef62c0901">arcp_const_cast</a>&lt;T&gt;(cptr2);</div><div class="line">    <a name="a10"></a><a class="code" href="group__Teuchos__UnitTestAssertMacros__grp.html#ga954afd05d9d3f2d0f874af90984923ea">TEST_COMPARE_ARRAYS</a>( ptr3, ptr );</div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="comment">//</span></div><div class="line">  out &lt;&lt; <span class="stringliteral">&quot;\nTest views ...\n&quot;</span>;</div><div class="line">  <span class="comment">//</span></div><div class="line"></div><div class="line">  {</div><div class="line">    out &lt;&lt; <span class="stringliteral">&quot;\nTest full non-const subview ...\n&quot;</span>;</div><div class="line">    <span class="keyword">const</span> ArrayView&lt;T&gt; av2 = <a class="code" href="classTeuchos_1_1Ptr.html#af7234a3ac243772a707da53d011276fb">ptr</a>(0,n);</div><div class="line">    <a class="code" href="group__Teuchos__UnitTestAssertMacros__grp.html#ga954afd05d9d3f2d0f874af90984923ea">TEST_COMPARE_ARRAYS</a>( av2, ptr );</div><div class="line">  }</div><div class="line"></div><div class="line">  {</div><div class="line">    out &lt;&lt; <span class="stringliteral">&quot;\nTest full shorthand non-const subview ...\n&quot;</span>;</div><div class="line">    <span class="keyword">const</span> ArrayView&lt;T&gt; av2 = <a class="code" href="classTeuchos_1_1Ptr.html#af7234a3ac243772a707da53d011276fb">ptr</a>();</div><div class="line">    <a class="code" href="group__Teuchos__UnitTestAssertMacros__grp.html#ga954afd05d9d3f2d0f874af90984923ea">TEST_COMPARE_ARRAYS</a>( av2, ptr );</div><div class="line">  }</div><div class="line"></div><div class="line">  {</div><div class="line">    out &lt;&lt; <span class="stringliteral">&quot;\nTest full const subview ...\n&quot;</span>;</div><div class="line">    <span class="keyword">const</span> ArrayView&lt;const T&gt; cav2 = ptr.getConst()(0,n);</div><div class="line">    <a class="code" href="group__Teuchos__UnitTestAssertMacros__grp.html#ga954afd05d9d3f2d0f874af90984923ea">TEST_COMPARE_ARRAYS</a>( cav2, ptr );</div><div class="line">  }</div><div class="line"></div><div class="line">  {</div><div class="line">    out &lt;&lt; <span class="stringliteral">&quot;\nTest full non-const to const subview ...\n&quot;</span>;</div><div class="line">    <span class="keyword">const</span> ArrayView&lt;const T&gt; cav2 = <a class="code" href="classTeuchos_1_1Ptr.html#af7234a3ac243772a707da53d011276fb">ptr</a>(0,n);</div><div class="line">    <a class="code" href="group__Teuchos__UnitTestAssertMacros__grp.html#ga954afd05d9d3f2d0f874af90984923ea">TEST_COMPARE_ARRAYS</a>( cav2, ptr );</div><div class="line">  }</div><div class="line"></div><div class="line">  {</div><div class="line">    out &lt;&lt; <span class="stringliteral">&quot;\nTest full short-hand const subview ...\n&quot;</span>;</div><div class="line">    <span class="keyword">const</span> ArrayView&lt;const T&gt; cav2 = ptr.getConst()();</div><div class="line">    <a class="code" href="group__Teuchos__UnitTestAssertMacros__grp.html#ga954afd05d9d3f2d0f874af90984923ea">TEST_COMPARE_ARRAYS</a>( cav2, ptr );</div><div class="line">  }</div><div class="line"></div><div class="line">  {</div><div class="line">    out &lt;&lt; <span class="stringliteral">&quot;\nTest implicit conversion from ArrayRCP&lt;T&gt; to ArrayView&lt;T&gt; ...\n&quot;</span>;</div><div class="line">    <span class="keyword">const</span> ArrayView&lt;T&gt; av2 = <a class="code" href="classTeuchos_1_1Ptr.html#af7234a3ac243772a707da53d011276fb">ptr</a>();</div><div class="line">    <a class="code" href="group__Teuchos__UnitTestAssertMacros__grp.html#ga954afd05d9d3f2d0f874af90984923ea">TEST_COMPARE_ARRAYS</a>( av2, ptr );</div><div class="line">  }</div><div class="line"></div><div class="line">  {</div><div class="line">    out &lt;&lt; <span class="stringliteral">&quot;\nTest implicit conversion from ArrayRCP&lt;const T&gt; to ArrayView&lt;const T&gt; ...\n&quot;</span>;</div><div class="line">    <span class="keyword">const</span> ArrayView&lt;const T&gt; av2 = ptr.getConst()();</div><div class="line">    <a class="code" href="group__Teuchos__UnitTestAssertMacros__grp.html#ga954afd05d9d3f2d0f874af90984923ea">TEST_COMPARE_ARRAYS</a>( av2, ptr );</div><div class="line">  }</div><div class="line"></div><div class="line">  {</div><div class="line">    out &lt;&lt; <span class="stringliteral">&quot;\nTest almost implicit conversion from ArrayRCP&lt;T&gt; to ArrayView&lt;const T&gt; ...\n&quot;</span>;</div><div class="line">    <span class="keyword">const</span> ArrayView&lt;const T&gt; av2 = <a class="code" href="classTeuchos_1_1Ptr.html#af7234a3ac243772a707da53d011276fb">ptr</a>();</div><div class="line">    <a class="code" href="group__Teuchos__UnitTestAssertMacros__grp.html#ga954afd05d9d3f2d0f874af90984923ea">TEST_COMPARE_ARRAYS</a>( av2, ptr );</div><div class="line">  }</div><div class="line"></div><div class="line">  {</div><div class="line">    out &lt;&lt; <span class="stringliteral">&quot;\nTest implicit conversion from ArrayRCP&lt;T&gt; to ArrayRCP&lt;const T&gt; ...\n&quot;</span>;</div><div class="line">    <span class="keyword">const</span> ArrayRCP&lt;const T&gt; ptr2 = <a class="code" href="classTeuchos_1_1Ptr.html#af7234a3ac243772a707da53d011276fb">ptr</a>;</div><div class="line">    <a class="code" href="group__Teuchos__UnitTestAssertMacros__grp.html#ga954afd05d9d3f2d0f874af90984923ea">TEST_COMPARE_ARRAYS</a>( ptr2, ptr );</div><div class="line">  }</div><div class="line"></div><div class="line">  {</div><div class="line">    out &lt;&lt; <span class="stringliteral">&quot;\nTest clone of ArrayView&lt;T&gt; to ArrayRCP&lt;T&gt; ...\n&quot;</span>;</div><div class="line">    <span class="keyword">const</span> ArrayRCP&lt;T&gt; ptr2 = Teuchos::arcpClone&lt;T&gt;(<a class="code" href="classTeuchos_1_1Ptr.html#af7234a3ac243772a707da53d011276fb">ptr</a>());</div><div class="line">    <a class="code" href="group__Teuchos__UnitTestAssertMacros__grp.html#ga954afd05d9d3f2d0f874af90984923ea">TEST_COMPARE_ARRAYS</a>( ptr2, ptr );</div><div class="line">  }</div><div class="line"></div><div class="line">  {</div><div class="line">    out &lt;&lt; <span class="stringliteral">&quot;\nTest clone of ArrayPtr&lt;const T&gt; to ArrayRCP&lt;T&gt; ...\n&quot;</span>;</div><div class="line">    <span class="keyword">const</span> ArrayRCP&lt;T&gt; ptr2 = Teuchos::arcpClone&lt;T&gt;(ptr.getConst()());</div><div class="line">    <a class="code" href="group__Teuchos__UnitTestAssertMacros__grp.html#ga954afd05d9d3f2d0f874af90984923ea">TEST_COMPARE_ARRAYS</a>( ptr2, ptr );</div><div class="line">  }</div><div class="line">  {</div><div class="line">    out &lt;&lt; <span class="stringliteral">&quot;\nTest extra data ...\n&quot;</span>;</div><div class="line">    ArrayRCP&lt;T&gt; ptr2 = arcp&lt;T&gt;(n);</div><div class="line">    Teuchos::set_extra_data( as&lt;int&gt;(1), <span class="stringliteral">&quot;int&quot;</span>, Teuchos::inOutArg(ptr2) );</div><div class="line">    <a name="a11"></a><a class="code" href="group__Teuchos__UnitTestAssertMacros__grp.html#ga16faa3967480b850d744e47ce9bccbcf">TEST_EQUALITY_CONST</a>( Teuchos::get_extra_data&lt;int&gt;(ptr2, <span class="stringliteral">&quot;int&quot;</span>), 1);</div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="keywordflow">return</span> success;</div><div class="line"></div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// Main driver program</span></div><div class="line"><span class="comment">//</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[] )</div><div class="line">{</div><div class="line"></div><div class="line">  <a name="_a12"></a><a class="code" href="classTeuchos_1_1GlobalMPISession.html">Teuchos::GlobalMPISession</a> mpiSession(&amp;argc, &amp;argv);</div><div class="line"></div><div class="line">  <span class="keyword">using</span> <a name="_a13"></a><a class="code" href="classTeuchos_1_1CommandLineProcessor.html">Teuchos::CommandLineProcessor</a>;</div><div class="line">  <span class="keyword">using</span> Teuchos::null;</div><div class="line">  <span class="keyword">using</span> <a name="_a14"></a><a class="code" href="classTeuchos_1_1RCP.html">Teuchos::RCP</a>;</div><div class="line">  <span class="keyword">using</span> <a name="a15"></a><a class="code" href="namespaceTeuchos.html#a8ce99105ee4c7203a1ecb670a198671a">Teuchos::rcp</a>;</div><div class="line">  <span class="keyword">using</span> <a class="code" href="classTeuchos_1_1ArrayRCP.html">Teuchos::ArrayRCP</a>;</div><div class="line">  <span class="keyword">using</span> Teuchos::arcp;</div><div class="line">  <span class="keyword">using</span> Teuchos::arcp_reinterpret_cast;</div><div class="line">  </div><div class="line">  <span class="keywordtype">bool</span> success = <span class="keyword">true</span>, result;</div><div class="line"> </div><div class="line">  <a class="code" href="classTeuchos_1_1RCP.html">Teuchos::RCP&lt;Teuchos::FancyOStream&gt;</a></div><div class="line">    out = <a name="a16"></a><a class="code" href="classTeuchos_1_1VerboseObjectBase.html#ab9b501211e8b48b597e5ce3a83e4aaf7">Teuchos::VerboseObjectBase::getDefaultOStream</a>();</div><div class="line"> </div><div class="line">  <span class="keywordflow">try</span> {</div><div class="line"></div><div class="line">    <span class="comment">// Read options from the commandline</span></div><div class="line">    <span class="keywordtype">int</span> num_ints = 10;</div><div class="line">    <span class="keywordtype">int</span> num_doubles = 10;</div><div class="line">    CommandLineProcessor clp(<span class="keyword">false</span>); <span class="comment">// Don&#39;t throw exceptions</span></div><div class="line">    clp.setOption( <span class="stringliteral">&quot;num-ints&quot;</span>, &amp;num_ints, <span class="stringliteral">&quot;Number of ints to allocate space for&quot;</span> );</div><div class="line">    clp.setOption( <span class="stringliteral">&quot;num-doubles&quot;</span>, &amp;num_doubles, <span class="stringliteral">&quot;Number of doubles to allocate space for&quot;</span> );</div><div class="line">    CommandLineProcessor::EParseCommandLineReturn parse_return = clp.parse(argc,argv);</div><div class="line">    <span class="keywordflow">if</span>( parse_return != CommandLineProcessor::PARSE_SUCCESSFUL ) {</div><div class="line">      *out &lt;&lt; <span class="stringliteral">&quot;\nEnd Result: TEST FAILED&quot;</span> &lt;&lt; std::endl;</div><div class="line">      <span class="keywordflow">return</span> parse_return;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keywordtype">int</span> sizeOfDouble = <span class="keyword">sizeof</span>(double);</div><div class="line">    <span class="keyword">const</span> <span class="keywordtype">int</span> sizeOfInt = <span class="keyword">sizeof</span>(int);</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keywordtype">int</span> total_bytes = num_doubles*sizeOfDouble + num_ints*sizeOfInt;</div><div class="line"></div><div class="line">    *out &lt;&lt; std::endl &lt;&lt; Teuchos::Teuchos_Version() &lt;&lt; std::endl;</div><div class="line"> </div><div class="line">    *out &lt;&lt; <span class="stringliteral">&quot;\nTesting basic ArrayRCP functionality ...\n&quot;</span>;</div><div class="line"></div><div class="line">    ArrayRCP&lt;char&gt;</div><div class="line">      char_ptr1 = arcp&lt;char&gt;(total_bytes);</div><div class="line"></div><div class="line">    *out &lt;&lt; <span class="stringliteral">&quot;\nchar_ptr1 = &quot;</span> &lt;&lt; char_ptr1 &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"></div><div class="line">    <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(char_ptr1.size() == total_bytes) );</div><div class="line">    <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(char_ptr1.lowerOffset() == 0) );</div><div class="line">    <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(char_ptr1.upperOffset() == total_bytes-1) );</div><div class="line">    <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(char_ptr1.strong_count() == 1) );</div><div class="line">    <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(char_ptr1.weak_count() == 0) );</div><div class="line">    <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(char_ptr1.total_count() == 1) );</div><div class="line">    result = test_ArrayRCP(char_ptr1,*out);</div><div class="line">    <span class="keywordflow">if</span> (!result) success = <span class="keyword">false</span>;</div><div class="line"></div><div class="line">    ArrayRCP&lt;char&gt;</div><div class="line">      char_ptr2 = null;</div><div class="line"></div><div class="line">    *out &lt;&lt; <span class="stringliteral">&quot;\nchar_ptr2 = &quot;</span> &lt;&lt; char_ptr2 &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"></div><div class="line">    <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(char_ptr2.size() == 0) );</div><div class="line">    <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(char_ptr2.get() == NULL) );</div><div class="line">    <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(char_ptr2.strong_count() == 0) );</div><div class="line">    <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(char_ptr2.weak_count() == 0) );</div><div class="line">    <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(char_ptr2.total_count() == 0) );</div><div class="line"></div><div class="line">    ArrayRCP&lt;char&gt;</div><div class="line">      char_ptr2b(char_ptr1); <span class="comment">// excplicitly test copy constructor</span></div><div class="line"></div><div class="line">    *out &lt;&lt; <span class="stringliteral">&quot;\nchar_ptr2b = &quot;</span> &lt;&lt; char_ptr2b &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"></div><div class="line">    <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(char_ptr2b.size() == total_bytes) );</div><div class="line">    <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(char_ptr2b.lowerOffset() == 0) );</div><div class="line">    <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(char_ptr2b.upperOffset() == total_bytes-1) );</div><div class="line">    <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(char_ptr2b.strong_count() == 2) );</div><div class="line">    <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(char_ptr2b.weak_count() == 0) );</div><div class="line">    <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(char_ptr2b.total_count() == 2) );</div><div class="line">    result = test_ArrayRCP(char_ptr2b,*out);</div><div class="line">    <span class="keywordflow">if</span> (!result) success = <span class="keyword">false</span>;</div><div class="line"></div><div class="line">    char_ptr2b = null;</div><div class="line"></div><div class="line">    <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(char_ptr2b.size() == 0) );</div><div class="line">    <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(char_ptr2.get() == NULL) );</div><div class="line">    <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(char_ptr2b.strong_count() == 0) );</div><div class="line">    <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(char_ptr1.strong_count() == 1) );</div><div class="line"></div><div class="line">    ArrayRCP&lt;char&gt;</div><div class="line">      char_ptr3 = char_ptr1.persistingView(total_bytes/2,total_bytes/2);</div><div class="line"></div><div class="line">    <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(char_ptr1.strong_count() == 2) );</div><div class="line">    <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(char_ptr3.strong_count() == 2) );</div><div class="line">    <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(char_ptr3.lowerOffset() == 0) );</div><div class="line">    <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(char_ptr3.upperOffset() == total_bytes/2-1) );</div><div class="line">    result = test_ArrayRCP(char_ptr3,*out);</div><div class="line">    <span class="keywordflow">if</span> (!result) success = <span class="keyword">false</span>;</div><div class="line"></div><div class="line">    *out &lt;&lt; <span class="stringliteral">&quot;\nchar_ptr3 = &quot;</span> &lt;&lt; char_ptr3 &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"></div><div class="line">    *out &lt;&lt; <span class="stringliteral">&quot;\nBreak up char_ptr1 into views of double and int data\n&quot;</span>;</div><div class="line"></div><div class="line">    <span class="keywordtype">int</span> offset = 0;</div><div class="line"> </div><div class="line">    ArrayRCP&lt;double&gt; double_ptr1 = <a name="a17"></a><a class="code" href="classTeuchos_1_1ArrayRCP.html#a298b130a6e8302a332dc1ad125282bc8">arcp_reinterpret_cast</a>&lt;<span class="keywordtype">double</span>&gt;(</div><div class="line">      char_ptr1.persistingView(offset,sizeOfDouble*num_doubles)</div><div class="line">      );</div><div class="line"></div><div class="line">    *out &lt;&lt; <span class="stringliteral">&quot;\ndouble_ptr1 = &quot;</span> &lt;&lt; double_ptr1 &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"></div><div class="line">    <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(char_ptr1.strong_count() == 3) );</div><div class="line">    <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(double_ptr1.strong_count() == 3) );</div><div class="line">    <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(double_ptr1.size() == num_doubles) );</div><div class="line"></div><div class="line">    result = test_ArrayRCP(double_ptr1,*out);</div><div class="line">    <span class="keywordflow">if</span> (!result) success = <span class="keyword">false</span>;</div><div class="line"> </div><div class="line">    offset += sizeOfDouble*num_doubles;</div><div class="line"></div><div class="line">    ArrayRCP&lt;int&gt; int_ptr1 = <a class="code" href="classTeuchos_1_1ArrayRCP.html#a298b130a6e8302a332dc1ad125282bc8">arcp_reinterpret_cast</a>&lt;<span class="keywordtype">int</span>&gt;(</div><div class="line">      char_ptr1.persistingView(offset,sizeOfInt*num_ints)</div><div class="line">      );</div><div class="line"></div><div class="line">    *out &lt;&lt; <span class="stringliteral">&quot;\nint_ptr1 = &quot;</span> &lt;&lt; int_ptr1 &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"></div><div class="line">    <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(char_ptr1.strong_count() == 4) );</div><div class="line">    <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(int_ptr1.strong_count() == 4) );</div><div class="line">    <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( !(int_ptr1.size() == num_ints) );</div><div class="line"></div><div class="line">    result = test_ArrayRCP(int_ptr1,*out);</div><div class="line">    <span class="keywordflow">if</span> (!result) success = <span class="keyword">false</span>;</div><div class="line"></div><div class="line">    *out &lt;&lt; <span class="stringliteral">&quot;\nCreating a constant view of double_ptr1\n&quot;</span>;</div><div class="line"> </div><div class="line">    ArrayRCP&lt;const double&gt;</div><div class="line">      double_ptr2 = double_ptr1.<a name="a18"></a><a class="code" href="classTeuchos_1_1RCP.html#a6157f90659de0be48bfa9e25dec3acc9">getConst</a>();</div><div class="line"></div><div class="line">    result = test_ArrayRCP_iterators(double_ptr2,*out);</div><div class="line">    <span class="keywordflow">if</span> (!result) success = <span class="keyword">false</span>;</div><div class="line"></div><div class="line"><span class="preprocessor">#ifdef SHOW_COMPILE_FAILURE_1</span></div><div class="line">    <span class="comment">// This will not compile since this function tries to use operator[] to</span></div><div class="line">    <span class="comment">// change data but it can&#39;t since it returns a reference to a const</span></div><div class="line">    <span class="comment">// double!</span></div><div class="line">    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; double_ptr2.size(); ++i ) {</div><div class="line">      double_ptr2[i] = 1.0; <span class="comment">// Error, you can change the value!</span></div><div class="line">    }</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"></div><div class="line">    *out &lt;&lt; <span class="stringliteral">&quot;\nCreating an array of RCP objects!\n&quot;</span>;</div><div class="line"></div><div class="line">    ArrayRCP&lt;RCP&lt;double&gt; &gt;</div><div class="line">      rcp_ptr1 = arcp&lt;RCP&lt;double&gt; &gt;(num_doubles);</div><div class="line"></div><div class="line">    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; num_doubles; ++i )</div><div class="line">      rcp_ptr1[i] = <a name="a19"></a><a class="code" href="classTeuchos_1_1RCP.html#a7fd9e80180eec6cf6e3038505d3dc7a4">rcp</a>(<span class="keyword">new</span> <span class="keywordtype">double</span>(i));</div><div class="line"></div><div class="line">    result = test_ArrayRCP_iterators(rcp_ptr1,*out);</div><div class="line">    <span class="keywordflow">if</span> (!result) success = <span class="keyword">false</span>;</div><div class="line"></div><div class="line">    *out &lt;&lt; <span class="stringliteral">&quot;\nCreating a const view of rcp_ptr1\n&quot;</span>;</div><div class="line"></div><div class="line">    ArrayRCP&lt;const RCP&lt;double&gt; &gt;</div><div class="line">      rcp_ptr2 = rcp_ptr1.<a class="code" href="classTeuchos_1_1RCP.html#a6157f90659de0be48bfa9e25dec3acc9">getConst</a>();</div><div class="line"></div><div class="line">    result = test_ArrayRCP_iterators(rcp_ptr2,*out);</div><div class="line">    <span class="keywordflow">if</span> (!result) success = <span class="keyword">false</span>;</div><div class="line"></div><div class="line">    *out &lt;&lt; <span class="stringliteral">&quot;\nCreating an ARCP&lt;double*&gt; object doubleptr_ptr1 and dynamically allocation each element\n&quot;</span>;</div><div class="line"></div><div class="line">    ArrayRCP&lt;double*&gt;</div><div class="line">      doubleptr_ptr1 = arcp&lt;double*&gt;(total_bytes);</div><div class="line"></div><div class="line">    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; doubleptr_ptr1.size(); ++i )</div><div class="line">      doubleptr_ptr1[i] = <span class="keyword">new</span> <span class="keywordtype">double</span>(i);</div><div class="line"></div><div class="line">    result = test_ArrayRCP_iterators(doubleptr_ptr1,*out);</div><div class="line">    <span class="keywordflow">if</span> (!result) success = <span class="keyword">false</span>;</div><div class="line"></div><div class="line">    *out &lt;&lt; <span class="stringliteral">&quot;\nCreating an ARCP&lt;double*const&gt; view of a doubleptr_ptr1\n&quot;</span>;</div><div class="line"> </div><div class="line">    ArrayRCP&lt;double*const&gt;</div><div class="line">      doubleptr_ptr2 = doubleptr_ptr1.<a class="code" href="classTeuchos_1_1RCP.html#a6157f90659de0be48bfa9e25dec3acc9">getConst</a>();</div><div class="line"></div><div class="line">    result = test_ArrayRCP_iterators(doubleptr_ptr2,*out);</div><div class="line">    <span class="keywordflow">if</span> (!result) success = <span class="keyword">false</span>;</div><div class="line"></div><div class="line"><span class="preprocessor">#ifdef SHOW_COMPILE_FAILURE_2</span></div><div class="line">    <span class="comment">// This will not compile since this function tries to use operator[] to</span></div><div class="line">    <span class="comment">// change data but it can&#39;t since it returns a reference to a double*const</span></div><div class="line">    <span class="comment">// object!</span></div><div class="line">    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; doubleptr_ptr2.size(); ++i ) {</div><div class="line">      *doubleptr_ptr2[i] = 1.0; <span class="comment">// Fine, you can change the value that is being pointed to for this entry!</span></div><div class="line">      doubleptr_ptr2[i] = NULL; <span class="comment">// Error, you can&#39;t change the pointer entry!</span></div><div class="line">    }</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"></div><div class="line">    *out &lt;&lt; <span class="stringliteral">&quot;\nCreating an ARCP&lt;const double * const&gt; view of a doubleptr_ptr1\n&quot;</span>;</div><div class="line"> </div><div class="line">    ArrayRCP&lt;const double*const&gt;</div><div class="line">      doubleptr_ptr3 = Teuchos::arcp_implicit_cast&lt;<span class="keyword">const</span> <span class="keywordtype">double</span>*<span class="keyword">const</span>&gt;(doubleptr_ptr1);</div><div class="line"></div><div class="line">    result = test_ArrayRCP_iterators(doubleptr_ptr3,*out);</div><div class="line">    <span class="keywordflow">if</span> (!result) success = <span class="keyword">false</span>;</div><div class="line"></div><div class="line"><span class="preprocessor">#ifdef SHOW_COMPILE_FAILURE_3</span></div><div class="line">    <span class="comment">// This will not compile since this function tries to use operator[] to</span></div><div class="line">    <span class="comment">// change data but it can&#39;t since it returns a reference to a double*const</span></div><div class="line">    <span class="comment">// object!</span></div><div class="line">    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; doubleptr_ptr3.size(); ++i ) {</div><div class="line">      *doubleptr_ptr3[i] = 1.0; <span class="comment">// Error, you can&#39;t change the value that is being pointed to!</span></div><div class="line">      doubleptr_ptr3[i] = NULL; <span class="comment">// Error, you can&#39;t change the pointer either!</span></div><div class="line">    }</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"></div><div class="line">    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; doubleptr_ptr1.size(); ++i )</div><div class="line">      <span class="keyword">delete</span> doubleptr_ptr1[i];</div><div class="line"></div><div class="line">    *out &lt;&lt; <span class="stringliteral">&quot;\nWrapping RCP&lt;std::vector&lt;T&gt; &gt; objects as ArrayRCP objects ...\n&quot;</span>;</div><div class="line"></div><div class="line">    {</div><div class="line"></div><div class="line">      ArrayRCP&lt;char&gt;</div><div class="line">        vchar_ptr1 = <a name="a20"></a><a class="code" href="classTeuchos_1_1ArrayRCP.html#a49400cd20d4b459b951135f5106e0148">arcp</a>(<a class="code" href="classTeuchos_1_1RCP.html#a7fd9e80180eec6cf6e3038505d3dc7a4">rcp</a>(<span class="keyword">new</span> std::vector&lt;char&gt;(total_bytes)));</div><div class="line">      </div><div class="line">      *out &lt;&lt; <span class="stringliteral">&quot;\nvchar_ptr1 = &quot;</span> &lt;&lt; vchar_ptr1 &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line">      </div><div class="line">      result = test_ArrayRCP(vchar_ptr1,*out);</div><div class="line">      <span class="keywordflow">if</span> (!result) success = <span class="keyword">false</span>;</div><div class="line">      </div><div class="line">      ArrayRCP&lt;const char&gt; vchar_ptr2 = vchar_ptr1;</div><div class="line"> </div><div class="line">      *out &lt;&lt; <span class="stringliteral">&quot;\nvchar_ptr2 = &quot;</span> &lt;&lt; vchar_ptr2 &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line">      </div><div class="line">      result = test_ArrayRCP_iterators(vchar_ptr2, *out);</div><div class="line">      <span class="keywordflow">if</span> (!result) success = <span class="keyword">false</span>;</div><div class="line">      </div><div class="line"><span class="preprocessor">#ifndef __sun</span></div><div class="line">      <span class="comment">// RAB: 2006/07/12: The sun compiler declares this call to</span></div><div class="line">      <span class="comment">// get_std_vector(...) to be ambiguous (which is nonsense based on</span></div><div class="line">      <span class="comment">// everything I know about C++)!</span></div><div class="line">      <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( Teuchos::get_std_vector(vchar_ptr1)-&gt;<a class="code" href="classTeuchos_1_1Comm.html#a346c8703a1ee3cb18cf3c812678cb01c">size</a>() != static_cast&lt;size_t&gt;(total_bytes) );</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line">      <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( vchar_ptr1.size() != <span class="keyword">static_cast&lt;</span>Teuchos_Ordinal<span class="keyword">&gt;</span>(total_bytes) );</div><div class="line">      <a class="code" href="group__TestForException__grp.html#ga904c9f821383ba177d6c5de1fdc787a1">TEUCHOS_TEST_FOR_EXCEPT</a>( vchar_ptr2.size() != <span class="keyword">static_cast&lt;</span>Teuchos_Ordinal<span class="keyword">&gt;</span>(total_bytes) );</div><div class="line">      </div><div class="line">    }</div><div class="line"></div><div class="line">    *out &lt;&lt; <span class="stringliteral">&quot;\nWrapping RCP&lt;ARray&lt;T&gt; &gt; objects as ArrayRCP objects ...\n&quot;</span>;</div><div class="line"></div><div class="line">    {</div><div class="line"></div><div class="line">      ArrayRCP&lt;char&gt;</div><div class="line">        vchar_ptr1 = <a class="code" href="classTeuchos_1_1ArrayRCP.html#a49400cd20d4b459b951135f5106e0148">arcp</a>(<a class="code" href="classTeuchos_1_1RCP.html#a7fd9e80180eec6cf6e3038505d3dc7a4">rcp</a>(<span class="keyword">new</span> <a name="_a21"></a><a class="code" href="classTeuchos_1_1Array.html">Teuchos::Array&lt;char&gt;</a>(total_bytes)));</div><div class="line">      </div><div class="line">      *out &lt;&lt; <span class="stringliteral">&quot;\nvchar_ptr1 = &quot;</span> &lt;&lt; vchar_ptr1 &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line">      </div><div class="line">      result = test_ArrayRCP(vchar_ptr1,*out);</div><div class="line">      <span class="keywordflow">if</span> (!result) success = <span class="keyword">false</span>;</div><div class="line"></div><div class="line"><span class="comment">/*      </span></div><div class="line"><span class="comment">      ArrayRCP&lt;const char&gt; vchar_ptr2 =</span></div><div class="line"><span class="comment">        arcp(</span></div><div class="line"><span class="comment">          Teuchos::rcp_implicit_cast&lt;const std::vector&lt;char&gt; &gt;(</span></div><div class="line"><span class="comment">            Teuchos::get_std_vector(vchar_ptr1)</span></div><div class="line"><span class="comment">            )</span></div><div class="line"><span class="comment">          );</span></div><div class="line"><span class="comment">*/</span></div><div class="line"></div><div class="line">    }</div><div class="line"> </div><div class="line">    <span class="comment">// ToDo: Fill in the rest of the tests!</span></div><div class="line"> </div><div class="line">    *out &lt;&lt; <span class="stringliteral">&quot;\nAll tests for ArrayRCP seem to check out!\n&quot;</span>;</div><div class="line"> </div><div class="line">  }</div><div class="line">  <a name="a22"></a><a class="code" href="group__teuchos__language__support__grp.html#gab3394c84cafa46db953af08c021aadc2">TEUCHOS_STANDARD_CATCH_STATEMENTS</a>(<span class="keyword">true</span>,std::cerr,success);</div><div class="line"> </div><div class="line">  <span class="keywordflow">if</span>(success)</div><div class="line">    *out &lt;&lt; <span class="stringliteral">&quot;\nEnd Result: TEST PASSED&quot;</span> &lt;&lt; std::endl; </div><div class="line"> </div><div class="line">  <span class="keywordflow">return</span> ( success ? 0 : 1 );</div><div class="line"> </div><div class="line">}</div></div><!-- fragment --> </div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
